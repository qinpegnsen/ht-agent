<!--查询开始-->
<div class="row clearfix p text-right">
  <div class="place-time clearfix mb col-lg-3">
    <div class="pl0 pr0 pull-left w100">
      <input type="text" class="form-control border-b-grey" maxlength="128" [(ngModel)]="wono" placeholder="请输入要查询的工单号">
    </div>
  </div>
  <div class="place-time clearfix mb col-lg-3">
    <div class="pl0 pr0 pull-left w100">
      <input type="text" class="form-control border-b-grey" maxlength="128" [(ngModel)]="ordno" placeholder="请输入要查询的订单号">
    </div>
  </div>
  <div class="search-term clearfix ml mb col-lg-3">
    <div class="pr0 pull-left w100">
      <select class="form-control pl-sm pr-sm" name="state" #stateEnum (change)="getState(stateEnum.value)">
        <option value="" >全部</option>
        <option value="{{item.key}}" *ngFor="let item of stateEnumList">{{item.val}}</option>
      </select>
    </div>
  </div>
  <div class="w10 pl-sm pr0 pull-left col-lg-23">
    <div class="form-group mb0 pr0 text-left">
      <button type="button" title="搜索"
              class="btn btn-primary bar-h3-btn mr0 ng-scope thc btn-thc" (click)="queryDatas()">
        <em class="icon-magnifier fa-fw"></em>
      </button>
    </div>
  </div>
</div>
<!--查询结束-->
<!--列表开始-->
<table class="table table-striped" #dataTable="rzhDataTable" [rzhData]="workOrderList"
       (pageChange)="queryDatas(1,$event)">
  <thead>
  <tr class="thc font">
    <th class="w5  text-center thc font">ID</th>
    <td class="w10 text-center vertical">工单号</td>
    <td class="w10 text-center vertical">订单号</td>
    <td class="w10 text-center vertical">收货人</td>
    <td class="w10 text-center vertical">手机</td>
    <td class="w25 vertical text-left">地址</td>
    <td class="w10 text-center vertical">状态</td>
    <td class="w20 text-center vertical">操作</td>
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let order of dataTable.data;let i = index">
    <td class="w5 text-center">{{order.id}}</td>
    <td class="w10 text-center">{{order.wono}}</td>
    <td class="w10 text-center">{{order.ordno}}</td>
    <td class="w10 text-center">{{order.ord?.linkman}}</td>
    <td class="w10 text-center">{{order.ord?.phone}}</td>
    <td class="w25 text-left">{{order.ord?.areaFullName}}{{order.ord?.address}}</td>
    <td class="w10 text-center">{{order.state | rzhState :'1305' }}</td>
    <td class="w20 text-center">
      <button *ngIf="order.state=='NO'" class="m-sm btn btn-xs btn-outline fa fa-check _backColor thc bg _myWhiteColor"
              (click)="toAccept(order.id,workOrderList.curPage)" #accept> 接单
      </button>
      <button  *ngIf="order.state=='NO'" class="m-sm btn btn-xs btn-outline fa fa-close _myWhiteBg thc font b"
              (click)="toReject(order.id,workOrderList.curPage)" #reject> 拒单
      </button>
      <button *ngIf="order.state=='ACCEPT'"  class="m-sm btn btn-xs btn-outline thc bg fa fa-truck _myWhiteColor"
              (click)="deliver(order.id,order.ordno)"> 发货
      </button>
      <button *ngIf="order.state!='REJECT'" class="m-sm btn btn-xs btn-outline fa fa-info-circle _myWhiteBg thc font b" routerLink="../work-detail"
      [queryParams]="{ordno:order.ordno}"> 查看详情
      </button>
    </td>
  </tr>
  </tbody>
  <tfoot>
  <tr>
    <td colspan="10" class="bt0">
      <div class="col-sm-5">
        <div class="text-muted"><strong>第 {{workOrderList.genStartRow()}} 至 {{workOrderList.genEndRow()}} 条，共
          {{workOrderList.totalRow}}
          条</strong></div>
      </div>
      <div class="col-sm-7">
        <div class="pull-right">
          <rzhBootstrapPaginator></rzhBootstrapPaginator>
        </div>
      </div>
    </td>
  </tr>
  </tfoot>
</table>
<!--列表结束-->
<!--发货弹框组件开始-->
  <app-deliver-goods  [woAgentId]="curWoAgentId" [ordno]="curOrdno" [page]="workOrderList.curPage"
                      (deliverGoods)="getDeliverOrderData($event)"></app-deliver-goods>
<!--发货弹框组件结束-->
<!--拒单组件开始-->
<app-reason-rejec [showReasonWindow]="showReasonWindow" [woAgengId]="woAgengId" (closeRejec)="closeRejecWin(obj,workOrderList.curPage)"></app-reason-rejec>
<!--拒单组件结束-->
